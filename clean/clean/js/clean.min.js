function applyColorPaletteFromImage(n){$styleCss=$("style#clean_color_palette").html();$styleCss=$styleCss.replace("{paletteVibrant}","rgba("+n.Vibrant.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{paletteMuted}","rgba("+n.Muted.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{paletteDarkVibrant}","rgba("+n.DarkVibrant.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{paletteDarkMuted}","rgba("+n.DarkMuted.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{paletteLightVibrant}","rgba("+n.LightVibrant.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{primaryColor}","rgba("+n.Vibrant.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{primaryColorHover}","rgba("+n.Muted.rgb.toString()+", 1.0)");$styleCss=$styleCss.replace("{primaryColorVisited}","rgba("+n.Vibrant.rgb.toString()+", 1.0)");$("#clean_color_palette").html($styleCss).promise().done(function(){$("body").addClass("vibrant-applied")})}function wrapText(n,t,i,r,u,f){for(var s=t.split(" "),e="",o=0;o<s.length;o++){var h=e+s[o]+" ",c=n.measureText(h),l=c.width;l>u&&o>0?(n.fillText(e,i,r),e=s[o]+" ",r+=f):e=h}n.fillText(e,i,r)}(function(n){n(".bg-img img").one("load",function(){img=this;var n=new Vibrant(img),t=n.swatches();applyColorPaletteFromImage(t)}).each(function(){this.complete&&n(this).load()});n(window).on("resize",function(){var t=document.getElementById("myCanvas"),i=t.getContext("2d"),u=parseInt(n(".article-main").width()),r=parseInt(n(".title h1").css("font-size")),f=r-10,e=n(".title h1").text();n(t).attr("height",parseInt(n(".title h1").height()));n(t).attr("width",parseInt(n(".title h1").width()));i.font=n(".title h1").css("font-weight")+" "+n(".title h1").css("font-size")+" "+n(".title h1").css("font-family");i.fillStyle=n("body").css("background-color");i.fillRect(0,0,n(t).attr("width"),n(t).attr("height"));i.globalCompositeOperation="destination-out";wrapText(i,e,0,f,u,r);n(t).css("background","transparent")}).trigger("resize")})(jQuery);